<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>LSD</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js" type="text/javascript"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript"></script>
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css" type="text/css" media="all"/>
        <link rel="stylesheet" href="https://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css" type="text/css" media="all"/>
        <link rel="stylesheet" id="theme" type="text/css" href="yatspec_alt.css">
    </head>
    <body>
        <div class="hd-switch">
            <input type="checkbox" id="switch-id" name="myswitch" onchange="toggleTheme()">
            <label for="switch-id">Classic</label>
            <span class="hd-switch-knob"></span>
        </div>
        <div class="logo">
            <h5 class="logo1">L</h5>iving &nbsp;<h5 class="logo2">S</h5>equence &nbsp;<h5 class="logo3">D</h5>iagrams
        </div>

        <header>
            <h1>Putting it all together</h1>
            <pre class="notes">As a developer on a app with a relational database,
I want to maintain a set of user reports, 
so that users can access the information they need directly.</pre>
            <nav class="contents">
                <h2>Contents</h2>
                <ul class="contents">
                        <li class='test-passed icon-check'>
                            <a href="#maintainAReportAgainstADatabase">Maintain a report against a database</a>
                        </li>
                </ul>
            </nav>
        </header>
        <main role="main">
            <article class="testmethod section">
                <header>
                    <a id="maintainAReportAgainstADatabase"></a>
                    <h2 class="section-header">Maintain a report against a database</h2>
                </header>
                <section class="section-body">
                        <section class="scenario" id="208120133_0_-12778467">
                            <section class="specification">
                                <h2>Specification<a id=""></a></h2>
                                <pre class="highlight specification">Given a rental database
When a user query is created that will &quot;find number of times each item has been rented&quot;
Then the user can run the query

When the user wants the query changed so that it will &quot;find number of times each item has been rented sorted least rented first&quot;
Then the user can run the query

Then the user checks the queries performance and is happy its fast enough</pre>
                            </section>
                            <section class="results">
                                <h3 class="logKey">Test result:</h3>
                                <pre class='highlight results test-passed icon-check'>Test passed</pre>
                            </section>
                            <section class="diagram">
                                <h3 logkey="Sequence_Diagram">Sequence Diagram</h3>
                                <div class="highlight SvgWrapper" ><?xml version="1.0" encoding="UTF-8"?>
                                    <svg xmlns="http://www.w3.org/2000/svg" contentScriptType="application/ecmascript"
                                         contentStyleType="text/css" height="427px" preserveAspectRatio="none"
                                         style="width:250px;height:427px;" version="1.1" viewBox="0 0 250 427"
                                         width="250px" zoomAndPan="magnify">
  <defs>
    <filter height="300%" id="fmll30bfbptf7" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2.0" />
      <feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0" />
      <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3" />
      <feBlend in="SourceGraphic" in2="blurOut3" mode="normal" />
    </filter>
  </defs>
  <g>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="28" x2="28" y1="88.4883" y2="342.9727" />
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="205.5" x2="205.5" y1="88.4883" y2="342.9727" />
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="5" y="85.5352">Client</text>
    <ellipse cx="28" cy="15" fill="#FEFECE" filter="url(#fmll30bfbptf7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;" />
    <path d="M28,23 L28,50 M15,31 L41,31 M28,50 L15,65 M28,50 L41,65 " fill="none" filter="url(#fmll30bfbptf7)" style="stroke:#A80036;stroke-width:2.0;" />
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="5" y="355.5078">Client</text>
    <ellipse cx="28" cy="368.4609" fill="#FEFECE" filter="url(#fmll30bfbptf7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;" />
    <path d="M28,376.4609 L28,403.4609 M15,384.4609 L41,384.4609 M28,403.4609 L15,418.4609 M28,403.4609 L41,418.4609 " fill="none" filter="url(#fmll30bfbptf7)" style="stroke:#A80036;stroke-width:2.0;" />
    <rect fill="#FEFECE" filter="url(#fmll30bfbptf7)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="65" x="171.5" y="53" />
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="178.5" y="73.5352">Embers</text>
    <rect fill="#FEFECE" filter="url(#fmll30bfbptf7)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="65" x="171.5" y="341.9727" />
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="178.5" y="362.5078">Embers</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="204" x2="194" y1="119.7988" y2="115.7988" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="204" x2="194" y1="119.7988" y2="123.7988" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="205" y1="119.7988" y2="119.7988" />
    <text class="sequence_diagram_clickable" fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" sequence_diagram_message_id="Create_Query_request_from_Client_to_Embers" textLength="132" x="35" y="115.0566">Create Query request</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="38" y1="149.1094" y2="145.1094" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="38" y1="149.1094" y2="153.1094" />
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28" x2="205" y1="149.1094" y2="149.1094" />
    <text class="sequence_diagram_clickable" fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" sequence_diagram_message_id="Create_Query_response_from_Embers_to_Client" textLength="142" x="45" y="144.3672">Create Query response</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="204" x2="194" y1="178.4199" y2="174.4199" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="204" x2="194" y1="178.4199" y2="182.4199" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="205" y1="178.4199" y2="178.4199" />
    <text class="sequence_diagram_clickable" fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" sequence_diagram_message_id="Get_Query_request_from_Client_to_Embers" textLength="113" x="35" y="173.6777">Get Query request</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="38" y1="207.7305" y2="203.7305" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="38" y1="207.7305" y2="211.7305" />
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28" x2="205" y1="207.7305" y2="207.7305" />
    <text class="sequence_diagram_clickable" fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" sequence_diagram_message_id="Get_Query_response_from_Embers_to_Client" textLength="123" x="45" y="202.9883">Get Query response</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="204" x2="194" y1="237.041" y2="233.041" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="204" x2="194" y1="237.041" y2="241.041" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="205" y1="237.041" y2="237.041" />
    <text class="sequence_diagram_clickable" fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" sequence_diagram_message_id="Updated_Query_request_from_Client_to_Embers" textLength="144" x="35" y="232.2988">Updated Query request</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="38" y1="266.3516" y2="262.3516" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="38" y1="266.3516" y2="270.3516" />
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28" x2="205" y1="266.3516" y2="266.3516" />
    <text class="sequence_diagram_clickable" fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" sequence_diagram_message_id="Updated_Query_response_from_Embers_to_Client" textLength="154" x="45" y="261.6094">Updated Query response</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="204" x2="194" y1="295.6621" y2="291.6621" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="204" x2="194" y1="295.6621" y2="299.6621" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="205" y1="295.6621" y2="295.6621" />
    <text class="sequence_diagram_clickable" fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" sequence_diagram_message_id="2_Get_Query_request_from_Client_to_Embers" textLength="125" x="35" y="290.9199">2 Get Query request</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="38" y1="324.9727" y2="320.9727" />
    <line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="38" y1="324.9727" y2="328.9727" />
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28" x2="205" y1="324.9727" y2="324.9727" />
    <text class="sequence_diagram_clickable" fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" sequence_diagram_message_id="2_Get_Query_response_from_Embers_to_Client" textLength="135" x="45" y="320.2305">2 Get Query response</text>
  </g>
</svg>

</div>
                            </section>
                            <section class="interestingGivens">
                                <h3 class="logKey">Interesting Givens</h3>
                                <table class="interestingGivens">
                                    <tr>
                                        <th class="key">Url</th>
                                        <td class="interestingGiven">http://localhost:8001/embers/query/findMostRentedItems</td>
                                    </tr>
                                    <tr>
                                        <th class="key">name</th>
                                        <td class="interestingGiven">findMostRentedItems</td>
                                    </tr>
                                    <tr>
                                        <th class="key">sql</th>
                                        <td class="interestingGiven">select i.name, nvl(count(r.item_id),0) as &quot;Rented Count&quot;   from items i   left outer join rentals r on r.item_id = i.item_id group by i.name order by 2 asc </td>
                                    </tr>
                                    <tr>
                                        <th class="key">description</th>
                                        <td class="interestingGiven">Find number of times each item has been rented, sorted least rented first</td>
                                    </tr>
                                </table>
                            </section>
                            <footer>
                                <section class="interactions">
                                <details>
                                    <summary>Captured Interactions</summary>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="Table_of_Items">Table of Items</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight ResultSetWrapper"><table><tr><th>item_id</th><th>name</th><th>purchase_price</th><th>description</th></tr><tr><td>1</td><td>Thing</td><td>987</td><td>its a really shinny thing</td></tr><tr><td>2</td><td>Car</td><td>6000</td><td>a red car</td></tr><tr><td>3</td><td>Mac Book Pro</td><td>1501</td><td>A nice Shiny Mac book pro</td></tr><tr><td>4</td><td>Mouse Mat</td><td>2</td><td>Cause we really need Mouse mats</td></tr><tr><td>5</td><td>Gum</td><td>0</td><td>Spearmint gum</td></tr></table></div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="Table_of_Customers">Table of Customers</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight ResultSetWrapper"><table><tr><th>name</th><th>description</th><th>customer_id</th></tr><tr><td>Mr Grahame Brown</td><td>love this customer</td><td>1</td></tr><tr><td>Miss Sweaty Betty</td><td>Our smelliest customer</td><td>2</td></tr><tr><td>Mrs Windome Meere</td><td>customer since 1993</td><td>3</td></tr><tr><td>John Doe</td><td>annonymous customers</td><td>4</td></tr></table></div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="Table_of_Rentals">Table of Rentals</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight ResultSetWrapper"><table><tr><th>actually_back</th><th>item_id</th><th>rental_price</th><th>actually_out</th><th>customer_id</th><th>rentals_id</th><th>expected_out</th><th>expected_back</th></tr><tr><td>2021-07-04 10:50:31.574</td><td>1</td><td>16</td><td>2021-07-13 10:50:31.574</td><td>1</td><td>1</td><td>2021-07-14 10:50:31.574</td><td>2021-07-04 10:50:31.574</td></tr><tr><td>2021-05-15 10:50:31.574</td><td>1</td><td>17</td><td>2021-05-24 10:50:31.574</td><td>2</td><td>2</td><td>2021-05-25 10:50:31.574</td><td>2021-05-15 10:50:31.574</td></tr><tr><td>2021-04-15 10:50:31.574</td><td>1</td><td>17</td><td>2021-04-25 10:50:31.574</td><td>3</td><td>3</td><td>2021-04-25 10:50:31.574</td><td>2021-04-15 10:50:31.574</td></tr><tr><td>null</td><td>1</td><td>19</td><td>2021-04-10 10:50:31.574</td><td>4</td><td>4</td><td>2021-04-10 10:50:31.574</td><td>2021-03-31 10:50:31.574</td></tr><tr><td>2021-04-15 10:50:31.574</td><td>3</td><td>16</td><td>2021-04-25 10:50:31.574</td><td>1</td><td>5</td><td>2021-04-25 10:50:31.574</td><td>2021-04-15 10:50:31.574</td></tr><tr><td>null</td><td>3</td><td>16</td><td>2021-04-10 10:50:31.574</td><td>1</td><td>6</td><td>2021-04-10 10:50:31.574</td><td>2021-03-31 10:50:31.574</td></tr><tr><td>null</td><td>4</td><td>16</td><td>2021-04-10 10:50:31.574</td><td>1</td><td>7</td><td>2021-04-10 10:50:31.574</td><td>2021-03-31 10:50:31.574</td></tr><tr><td>2021-04-24 10:50:31.574</td><td>2</td><td>16</td><td>2021-05-14 10:50:31.574</td><td>1</td><td>8</td><td>2021-05-15 10:50:31.574</td><td>2021-04-25 10:50:31.574</td></tr><tr><td>2021-04-15 10:50:31.574</td><td>2</td><td>16</td><td>2021-04-24 10:50:31.574</td><td>1</td><td>9</td><td>2021-04-25 10:50:31.574</td><td>2021-04-15 10:50:31.574</td></tr><tr><td>null</td><td>2</td><td>16</td><td>2021-04-10 10:50:31.574</td><td>1</td><td>10</td><td>2021-04-10 10:50:31.574</td><td>2021-03-31 10:50:31.574</td></tr></table></div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="Create_Query_request_from_Client_to_Embers">Create Query request from Client to Embers</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight HttpRequestWrapper">POST http://localhost:8001/embers/admin
Headers: {Accept-Charset=[UTF-8], Content-Type=[application/json]}
Body: {"name":"findMostRentedItems", "sql":"select+i.name%2C+nvl%28count%28r.item_id%29%2C0%29+as+%22Rented+Count%22+++from+items+i+++left+outer+join+rentals+r+on+r.item_id+%3D+i.item_id+group+by+i.name+order+by+2+desc+", "description":"Find+number+of+times+each+item+has+been+rented"}</div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="Create_Query_response_from_Embers_to_Client">Create Query response from Embers to Client</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight HttpResponseWrapper">Response Code: 200
Headers: {null=[HTTP/1.1 200 OK], Server=[Jetty(9.3.0.M1)], Content-Length=[24], Date=[Mon, 05 Apr 2021 09:50:31 GMT], Content-Type=[text/html]}
Body: Successfully added query
</div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="Get_Query_request_from_Client_to_Embers">Get Query request from Client to Embers</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight HttpRequestWrapper">GET http://localhost:8001/embers/query/findMostRentedItems
Headers: null
Body: null</div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="Get_Query_response_from_Embers_to_Client">Get Query response from Embers to Client</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight HttpResponseWrapper">Response Code: 200
Headers: {null=[HTTP/1.1 200 OK], Server=[Jetty(9.3.0.M1)], Content-Length=[65], Date=[Mon, 05 Apr 2021 09:50:31 GMT], Content-Type=[text/html]}
Body: name,rented count
Thing,4
Car,3
Mac Book Pro,2
Mouse Mat,1
Gum,0
</div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="Updated_Query_request_from_Client_to_Embers">Updated Query request from Client to Embers</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight HttpRequestWrapper">POST http://localhost:8001/embers/admin
Headers: {Accept-Charset=[UTF-8], Content-Type=[application/json]}
Body: {"name":"findMostRentedItems", "sql":"select+i.name%2C+nvl%28count%28r.item_id%29%2C0%29+as+%22Rented+Count%22+++from+items+i+++left+outer+join+rentals+r+on+r.item_id+%3D+i.item_id+group+by+i.name+order+by+2+asc+", "description":"Find+number+of+times+each+item+has+been+rented%2C+sorted+least+rented+first"}</div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="Updated_Query_response_from_Embers_to_Client">Updated Query response from Embers to Client</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight HttpResponseWrapper">Response Code: 200
Headers: {null=[HTTP/1.1 200 OK], Server=[Jetty(9.3.0.M1)], Content-Length=[26], Date=[Mon, 05 Apr 2021 09:50:31 GMT], Content-Type=[text/html]}
Body: Successfully updated query
</div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="2_Get_Query_request_from_Client_to_Embers">2 Get Query request from Client to Embers</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight HttpRequestWrapper">GET http://localhost:8001/embers/query/findMostRentedItems
Headers: null
Body: null</div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="2_Get_Query_response_from_Embers_to_Client">2 Get Query response from Embers to Client</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight HttpResponseWrapper">Response Code: 200
Headers: {null=[HTTP/1.1 200 OK], Server=[Jetty(9.3.0.M1)], Content-Length=[65], Date=[Mon, 05 Apr 2021 09:50:31 GMT], Content-Type=[text/html]}
Body: name,rented count
Gum,0
Mouse Mat,1
Mac Book Pro,2
Car,3
Thing,4
</div>
                                    </details>
                                    <details class="interaction">
                                        <summary class="logKey" logkey="Database_after___queries_statistics">Database after - queries_statistics</summary>
                                        <div contenteditable="true" ondblclick="document.execCommand('selectAll',false,null)"
                                             class="logValue highlight ResultSetWrapper"><table><tr><th>duration</th><th>result</th><th>date_executed</th><th>query_name</th><th>id</th></tr><tr><td>1</td><td>Number of rows returned: 5</td><td>2021-04-05 10:50:31.593</td><td>findMostRentedItems</td><td>8</td></tr><tr><td>2</td><td>Number of rows returned: 5</td><td>2021-04-05 10:50:31.582</td><td>findMostRentedItems</td><td>7</td></tr></table></div>
                                    </details>
                                </details>
                            </section>
                            </footer>
                        </section>
                </section>
            </article>
        </main>
        <footer>
            <div class="footer">
                <script src="xregexp.js" type="text/javascript"></script>
                <script src="yatspec.js" type="text/javascript"></script>
            </div>
        </footer>
    </body>
</html>
